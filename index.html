<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Scorebord</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #1a1a1a;
            color: white;
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .bingo-board {
            display: grid;
            grid-template-rows: repeat(5, 1fr);
            gap: 10px;
            width: 95vw;
            height: 80vh;
        }

        .bingo-row {
            display: grid;
            grid-template-columns: 100px repeat(15, 1fr);
            gap: 8px;
        }

        .letter {
            font-size: 4rem;
            font-weight: 900;
            text-align: center;
            color: #ffcc00;
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .number-btn {
            height: 100%;
            border: 4px solid transparent;
            border-radius: 10px;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            background-color: #d3d3d3;
            color: #333;
            transition: all 0.1s ease;
            outline: none;
        }

        .number-btn:focus {
            border-color: #00aaff;
            box-shadow: 0 0 20px #00aaff;
            transform: scale(1.05);
            z-index: 20;
        }

        .number-btn.active-now {
            background-color: #ff8c00 !important;
            color: white;
            box-shadow: 0 0 25px #ff8c00;
        }

        .number-btn.active-past {
            background-color: #ffd700 !important;
            color: #333;
        }

        .controls {
            width: 95vw;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #333;
            border-radius: 15px;
        }

        .counter { font-size: 1.8rem; font-weight: bold; color: #ffcc00; min-width: 200px; }

        .button-group {
            display: flex;
            gap: 10px;
        }

        .admin-btn {
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: white;
            transition: opacity 0.2s;
        }

        #undo-btn { background-color: #3498db; }
        #fullscreen-btn { background-color: #2ecc71; }
        #reset-btn { background-color: #e74c3c; }
        .admin-btn:hover { opacity: 0.8; }
        .admin-btn:disabled { background-color: #555; cursor: not-allowed; }
    </style>
</head>
<body>

<div class="bingo-board" id="board"></div>

<div class="controls">
    <div class="counter">Getrokken: <span id="count-value">0</span> / 75</div>
    
    <div style="color: #bbb; font-size: 0.85rem; text-align: center;">
        <b>Pijltjes</b>: Navigeer | <b>Enter</b>: Markeer | <b>Backspace</b>: Vorige | <b>F</b>: Full-screen
    </div>

    <div class="button-group">
        <button id="undo-btn" class="admin-btn" onclick="undoLast()">Vorige</button>
        <button id="fullscreen-btn" class="admin-btn" onclick="toggleFullScreen()">Volledig Scherm</button>
        <button id="reset-btn" class="admin-btn" onclick="resetBoard()">Reset</button>
    </div>
</div>

<script>
    const board = document.getElementById('board');
    const countDisplay = document.getElementById('count-value');
    const undoBtn = document.getElementById('undo-btn');
    const letters = ['B', 'I', 'N', 'G', 'O'];
    const ranges = [[1, 15], [16, 30], [31, 45], [46, 60], [61, 75]];

    let drawnHistory = []; // Bijhouden van de volgorde van getrokken getallen
    let buttonsGrid = [];

    function createBoard() {
        board.innerHTML = '';
        buttonsGrid = [];
        drawnHistory = [];
        updateUI();
        
        letters.forEach((letter, rIndex) => {
            const row = document.createElement('div');
            row.className = 'bingo-row';

            const letterDiv = document.createElement('div');
            letterDiv.className = 'letter';
            letterDiv.innerText = letter;
            row.appendChild(letterDiv);

            const [start, end] = ranges[rIndex];
            const currentRowButtons = [];

            for (let i = start; i <= end; i++) {
                const btn = document.createElement('button');
                btn.className = 'number-btn';
                btn.innerText = i;
                
                btn.addEventListener('click', () => {
                    toggleNumber(btn);
                    btn.focus();
                });

                row.appendChild(btn);
                currentRowButtons.push(btn);
            }
            buttonsGrid.push(currentRowButtons);
            board.appendChild(row);
        });

        setTimeout(() => buttonsGrid[0][0].focus(), 100);
    }

    function toggleNumber(btn) {
        // Alleen toevoegen als het getal nog niet getrokken is
        if (btn.classList.contains('active-now') || btn.classList.contains('active-past')) return;

        // Maak de huidige oranje knop geel
        if (drawnHistory.length > 0) {
            const currentLast = drawnHistory[drawnHistory.length - 1];
            currentLast.classList.remove('active-now');
            currentLast.classList.add('active-past');
        }

        // Maak de nieuwe knop oranje
        btn.classList.add('active-now');
        drawnHistory.push(btn);
        
        updateUI();
    }

    function undoLast() {
        if (drawnHistory.length === 0) return;

        // Pak de allerlaatste (oranje) knop en maak deze weer grijs
        const lastBtn = drawnHistory.pop();
        lastBtn.classList.remove('active-now', 'active-past');

        // Maak de knop daaronder (als die er is) weer oranje in plaats van geel
        if (drawnHistory.length > 0) {
            const newLast = drawnHistory[drawnHistory.length - 1];
            newLast.classList.remove('active-past');
            newLast.classList.add('active-now');
            newLast.focus();
        }

        updateUI();
    }

    function updateUI() {
        countDisplay.innerText = drawnHistory.length;
        undoBtn.disabled = drawnHistory.length === 0;
    }

    function toggleFullScreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            if (document.exitFullscreen) document.exitFullscreen();
        }
    }

    document.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'f') { toggleFullScreen(); return; }
        if (e.key === 'Backspace') { undoLast(); return; }

        const active = document.activeElement;
        let r = -1, c = -1;

        for(let i=0; i<5; i++) {
            let j = buttonsGrid[i].indexOf(active);
            if(j !== -1) { r = i; c = j; break; }
        }

        if(r === -1 && ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter'].includes(e.key)) {
            if(drawnHistory.length > 0) drawnHistory[drawnHistory.length-1].focus();
            else buttonsGrid[0][0].focus();
            return;
        }

        if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) e.preventDefault();

        switch(e.key) {
            case 'ArrowUp':    if(r > 0) buttonsGrid[r-1][c].focus(); break;
            case 'ArrowDown':  if(r < 4) buttonsGrid[r+1][c].focus(); break;
            case 'ArrowLeft':  if(c > 0) buttonsGrid[r][c-1].focus(); break;
            case 'ArrowRight': if(c < 14) buttonsGrid[r][c+1].focus(); break;
            case 'Enter':      toggleNumber(active); break;
        }
    });

    function resetBoard() {
        if (confirm("Hele bord wissen voor een nieuwe ronde?")) {
            createBoard();
        }
    }

    createBoard();
</script>

</body>
</html>
